<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>AquaGuard Permit Checker</title>

<style>
:root {
  --bg:#0f172a;
  --card:#111827;
  --muted:#94a3b8;
  --text:#e5e7eb;
  --accent:#22c55e;
  --warn:#f97316;
  --danger:#ef4444;
  --ok:#10b981;
}
body {
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto;
}
.container {
  max-width:960px;
  margin:32px auto;
  padding:16px;
}
.card {
  background:var(--card);
  border-radius:12px;
  padding:16px;
  margin-bottom:16px;
}
input, select {
  width:100%;
  padding:10px;
  margin-top:6px;
  border-radius:8px;
  border:1px solid #374151;
  background:#0b1220;
  color:var(--text);
}
button {
  padding:12px 16px;
  border-radius:8px;
  border:0;
  font-weight:600;
  cursor:pointer;
}
.primary {
  background:var(--accent);
  color:#052e16;
}
.result {
  margin-top:14px;
  padding:14px;
  border-radius:12px;
}
.yes { background:rgba(239,68,68,.15); }
.no { background:rgba(16,185,129,.15); }
.maybe { background:rgba(249,115,22,.15); }

header {
  display:flex;
  align-items:center;
  gap:16px;
  margin-bottom:16px;
}
header img {
  height:56px;
}
small {
  color:var(--muted);
}
footer {
  margin-top:24px;
  font-size:.85rem;
  color:var(--muted);
}
</style>
</head>

<body>
<div class="container">

<header>
  <img src="aquaguard-logo.jpeg" alt="AquaGuard Foundation Solutions">
  <div>
    <h1 style="margin:0">Permit Checker</h1>
    <small>AquaGuard Foundation Solutions Â· A Groundworks Company</small>
  </div>
</header>

<div class="card">
  <label>Property Address (Georgia)</label>
  <input id="address" placeholder="875 Pickens Industrial Dr NE, Marietta, GA" />

  <label style="margin-top:10px">Work Type</label>
  <select id="work">
    <option value="helical">Helical Piers</option>
    <option value="push">Push Piers</option>
    <option value="wall">Wall Anchors</option>
    <option value="intellijack">IntelliJacks</option>
    <option value="beam">Supplemental Beams</option>
    <option value="carbon">Carbon Fiber Strips</option>
    <option value="slab">Slab Piers</option>
  </select>

  <button class="primary" style="margin-top:14px" onclick="checkPermit()">
    Check Permit
  </button>

  <div id="result" class="result maybe" style="display:none"></div>
</div>

<footer>
<strong>Ruleset:</strong> 1-22-2026<br>
<strong>Tool created by:</strong> Matthew Urbanski, CFI<br><br>
This tool provides internal guidance only. Jurisdictions vary and must always be verified
using randymajors.org and qPublic before contract execution.
</footer>

</div>

<script>
const RULES = {
  countiesRequiring: [
    "Bartow","Butts","Cobb","DeKalb","Fulton","Gwinnett","Cherokee","Newton"
  ],
  cobbExceptions: [
    "Mableton","Kennesaw","Acworth","Powder Springs","Unincorporated"
  ],
  dekalbExceptions: ["Dunwoody"],
  unknownCities: [
    "Adairsville","Kingston","Cartersville","White","Euharlee","Rydal","Emerson",
    "Jackson","Jenkinsburg","Flovilla",
    "Holly Springs","Waleska","Ball Ground",
    "Clarkston","Lithonia","Pine Lake",
    "Chattahoochee Hills","College Park","Palmetto","Union City",
    "Auburn","Braselton","Buford","Dacula",
    "Oxford","Porterdale","Mansfield","Newborn"
  ]
};

function normalize(text) {
  return text ? text.trim().replace(/\s+/g," ").replace(/\b\w/g,c=>c.toUpperCase()) : "";
}

async function geocode(address) {
  const res = await fetch(
    `https://nominatim.openstreetmap.org/search?format=json&addressdetails=1&limit=1&q=${encodeURIComponent(address)}`
  );
  const data = await res.json();
  if (!data[0]) throw "No result";
  return data[0].address;
}

function showResult(type, html) {
  const el = document.getElementById("result");
  el.className = "result " + type;
  el.innerHTML = html;
  el.style.display = "block";
}

async function checkPermit() {
  try {
    const addr = await geocode(document.getElementById("address").value);
    const city = normalize(addr.city || addr.town || addr.village || "");
    const county = normalize((addr.county || "").replace(" County",""));
    const work = document.getElementById("work").value;

    if (work === "slab") {
      return showResult("no",
        "<strong>No permit required</strong><br>Slab piers are exempt statewide."
      );
    }

    if (city === "Stone Mountain") {
      return showResult("yes",
        "<strong>Permit required</strong><br>Stone Mountain requires permits for ALL structural work."
      );
    }

    if (city === "Atlanta") {
      return showResult("yes",
        "<strong>Permit required</strong><br>Atlanta always requires permits. Land survey required."
      );
    }

    if (county === "Cobb" && RULES.cobbExceptions.includes(city || "Unincorporated")) {
      return showResult("no",
        "<strong>No permit required</strong><br>This location is a Cobb County exception."
      );
    }

    if (county === "DeKalb" && RULES.dekalbExceptions.includes(city)) {
      return showResult("no",
        "<strong>No permit required</strong><br>Dunwoody is a DeKalb exception."
      );
    }

    if (RULES.unknownCities.includes(city)) {
      return showResult("maybe",
        "<strong>Check / Try</strong><br>This city is untested. Attempt to obtain a permit."
      );
    }

    if (RULES.countiesRequiring.includes(county)) {
      return showResult("yes",
        "<strong>Permit required</strong><br>This county requires permits."
      );
    }

    showResult("no",
      "<strong>No permit required</strong><br>County not listed as permit-required."
    );
  } catch (e) {
    showResult("maybe",
      "<strong>Unable to determine</strong><br>Please verify manually."
    );
  }
}
</script>

</body>
</html>